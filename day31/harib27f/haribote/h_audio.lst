     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_mmio
     7 00000000                                 	EXTERN	_memman_alloc_4k
     8 00000000                                 	EXTERN	_sprintf
     9 00000000                                 	EXTERN	_putfonts8_asc
    10 00000000                                 [FILE "h_audio.c"]
    11                                          [SECTION .data]
    12 00000000                                 	ALIGNB	4
    13 00000000                                 _mmio:
    14 00000000 FEBF0000                        	DD	-21037056
    15                                          [SECTION .text]
    16 00000000                                 	GLOBAL	_init_corb
    17 00000000                                 _init_corb:
    18 00000000 8B 15 [00000000]                	MOV	EDX,DWORD [_mmio]
    19 00000006 55                              	PUSH	EBP
    20 00000007 89 E5                           	MOV	EBP,ESP
    21 00000009 8A 42 4C                        	MOV	AL,BYTE [76+EDX]
    22 0000000C 83 C8 FD                        	OR	EAX,-3
    23 0000000F 88 42 4C                        	MOV	BYTE [76+EDX],AL
    24 00000012 68 00001000                     	PUSH	4096
    25 00000017 FF 75 08                        	PUSH	DWORD [8+EBP]
    26 0000001A C7 05 [0000003C] 00000100       	MOV	DWORD [_corb_num_entries],256
    27 00000024 E8 [00000000]                   	CALL	_memman_alloc_4k
    28 00000029 8B 15 [00000000]                	MOV	EDX,DWORD [_mmio]
    29 0000002F A3 [00000044]                   	MOV	DWORD [_corb_buffer],EAX
    30 00000034 89 42 40                        	MOV	DWORD [64+EDX],EAX
    31 00000037 C1 E8 1F                        	SHR	EAX,31
    32 0000003A 89 42 44                        	MOV	DWORD [68+EDX],EAX
    33 0000003D 66 C7 42 48 0000                	MOV	WORD [72+EDX],0
    34 00000043 66 8B 42 4A                     	MOV	AX,WORD [74+EDX]
    35 00000047 66 0D 8000                      	OR	AX,-32768
    36 0000004B 66 89 42 4A                     	MOV	WORD [74+EDX],AX
    37 0000004F 66 C7 42 4A 0000                	MOV	WORD [74+EDX],0
    38 00000055 8A 42 4C                        	MOV	AL,BYTE [76+EDX]
    39 00000058 83 C8 02                        	OR	EAX,2
    40 0000005B 88 42 4C                        	MOV	BYTE [76+EDX],AL
    41 0000005E C9                              	LEAVE
    42 0000005F C3                              	RET
    43 00000060                                 	GLOBAL	_init_rirb
    44 00000060                                 _init_rirb:
    45 00000060 8B 15 [00000000]                	MOV	EDX,DWORD [_mmio]
    46 00000066 55                              	PUSH	EBP
    47 00000067 89 E5                           	MOV	EBP,ESP
    48 00000069 8A 42 5C                        	MOV	AL,BYTE [92+EDX]
    49 0000006C 83 C8 FD                        	OR	EAX,-3
    50 0000006F 88 42 5C                        	MOV	BYTE [92+EDX],AL
    51 00000072 68 00001000                     	PUSH	4096
    52 00000077 FF 75 08                        	PUSH	DWORD [8+EBP]
    53 0000007A C7 05 [00000040] 00000100       	MOV	DWORD [_rirb_num_entries],256
    54 00000084 E8 [00000000]                   	CALL	_memman_alloc_4k
    55 00000089 8B 15 [00000000]                	MOV	EDX,DWORD [_mmio]
    56 0000008F A3 [00000048]                   	MOV	DWORD [_rirb_buffer],EAX
    57 00000094 89 42 50                        	MOV	DWORD [80+EDX],EAX
    58 00000097 C1 E8 1F                        	SHR	EAX,31
    59 0000009A 89 42 54                        	MOV	DWORD [84+EDX],EAX
    60 0000009D 66 8B 42 58                     	MOV	AX,WORD [88+EDX]
    61 000000A1 66 0D 8000                      	OR	AX,-32768
    62 000000A5 66 89 42 58                     	MOV	WORD [88+EDX],AX
    63 000000A9 66 C7 42 58 0000                	MOV	WORD [88+EDX],0
    64 000000AF 66 8B 42 5A                     	MOV	AX,WORD [90+EDX]
    65 000000B3 83 C8 01                        	OR	EAX,1
    66 000000B6 66 89 42 5A                     	MOV	WORD [90+EDX],AX
    67 000000BA 8A 42 5C                        	MOV	AL,BYTE [92+EDX]
    68 000000BD 83 C8 02                        	OR	EAX,2
    69 000000C0 88 42 5C                        	MOV	BYTE [92+EDX],AL
    70 000000C3 8B 15 [00000000]                	MOV	EDX,DWORD [_mmio]
    71 000000C9 8A 42 5C                        	MOV	AL,BYTE [92+EDX]
    72 000000CC 83 C8 01                        	OR	EAX,1
    73 000000CF 88 42 5C                        	MOV	BYTE [92+EDX],AL
    74 000000D2 C9                              	LEAVE
    75 000000D3 C3                              	RET
    76                                          [SECTION .data]
    77 00000004                                 LC0:
    78 00000004 67 63 61 70 3A 20 25 78 00      	DB	"gcap: %x",0x00
    79 0000000D                                 LC1:
    80 0000000D 43 4F 52 42 53 49 5A 45 3A 20   	DB	"CORBSIZE: %x",0x00
       00000017 25 78 00 
    81 0000001A                                 LC2:
    82 0000001A 52 49 52 42 53 49 5A 45 3A 20   	DB	"RIRBSIZE: %x",0x00
       00000024 25 78 00 
    83 00000027                                 LC3:
    84 00000027 6D 65 6D 6F 72 79 20 73 69 7A   	DB	"memory size: %dKB",0x00
       00000031 65 3A 20 25 64 4B 42 00 
    85                                          [SECTION .text]
    86 000000D4                                 	GLOBAL	_hdaudio_test
    87 000000D4                                 _hdaudio_test:
    88 000000D4 55                              	PUSH	EBP
    89 000000D5 89 E5                           	MOV	EBP,ESP
    90 000000D7 56                              	PUSH	ESI
    91 000000D8 53                              	PUSH	EBX
    92 000000D9 83 C4 80                        	ADD	ESP,-128
    93 000000DC 8D 9D FFFFFF78                  	LEA	EBX,DWORD [-136+EBP]
    94 000000E2 A1 [00000000]                   	MOV	EAX,DWORD [_mmio]
    95 000000E7 8B 75 08                        	MOV	ESI,DWORD [8+EBP]
    96 000000EA 66 8B 10                        	MOV	DX,WORD [EAX]
    97 000000ED 66 8B 10                        	MOV	DX,WORD [EAX]
    98 000000F0 66 8B 00                        	MOV	AX,WORD [EAX]
    99 000000F3 0F B7 C0                        	MOVZX	EAX,AX
   100 000000F6 50                              	PUSH	EAX
   101 000000F7 68 [00000004]                   	PUSH	LC0
   102 000000FC 53                              	PUSH	EBX
   103 000000FD E8 [00000000]                   	CALL	_sprintf
   104 00000102 53                              	PUSH	EBX
   105 00000103 6A 07                           	PUSH	7
   106 00000105 68 00000140                     	PUSH	320
   107 0000010A 6A 64                           	PUSH	100
   108 0000010C 0F BF 46 04                     	MOVSX	EAX,WORD [4+ESI]
   109 00000110 50                              	PUSH	EAX
   110 00000111 FF 76 08                        	PUSH	DWORD [8+ESI]
   111 00000114 E8 [00000000]                   	CALL	_putfonts8_asc
   112 00000119 A1 [00000000]                   	MOV	EAX,DWORD [_mmio]
   113 0000011E 83 C4 24                        	ADD	ESP,36
   114 00000121 8A 40 4E                        	MOV	AL,BYTE [78+EAX]
   115 00000124 0F B6 C0                        	MOVZX	EAX,AL
   116 00000127 50                              	PUSH	EAX
   117 00000128 68 [0000000D]                   	PUSH	LC1
   118 0000012D 53                              	PUSH	EBX
   119 0000012E E8 [00000000]                   	CALL	_sprintf
   120 00000133 53                              	PUSH	EBX
   121 00000134 6A 07                           	PUSH	7
   122 00000136 68 00000154                     	PUSH	340
   123 0000013B 6A 64                           	PUSH	100
   124 0000013D 0F BF 46 04                     	MOVSX	EAX,WORD [4+ESI]
   125 00000141 50                              	PUSH	EAX
   126 00000142 FF 76 08                        	PUSH	DWORD [8+ESI]
   127 00000145 E8 [00000000]                   	CALL	_putfonts8_asc
   128 0000014A A1 [00000000]                   	MOV	EAX,DWORD [_mmio]
   129 0000014F 83 C4 24                        	ADD	ESP,36
   130 00000152 8A 40 5E                        	MOV	AL,BYTE [94+EAX]
   131 00000155 0F B6 C0                        	MOVZX	EAX,AL
   132 00000158 50                              	PUSH	EAX
   133 00000159 68 [0000001A]                   	PUSH	LC2
   134 0000015E 53                              	PUSH	EBX
   135 0000015F E8 [00000000]                   	CALL	_sprintf
   136 00000164 53                              	PUSH	EBX
   137 00000165 6A 07                           	PUSH	7
   138 00000167 68 00000168                     	PUSH	360
   139 0000016C 6A 64                           	PUSH	100
   140 0000016E 0F BF 46 04                     	MOVSX	EAX,WORD [4+ESI]
   141 00000172 50                              	PUSH	EAX
   142 00000173 FF 76 08                        	PUSH	DWORD [8+ESI]
   143 00000176 E8 [00000000]                   	CALL	_putfonts8_asc
   144 0000017B 83 C4 24                        	ADD	ESP,36
   145 0000017E 68 00001000                     	PUSH	4096
   146 00000183 FF 75 0C                        	PUSH	DWORD [12+EBP]
   147 00000186 E8 [00000000]                   	CALL	_memman_alloc_4k
   148 0000018B 6A 04                           	PUSH	4
   149 0000018D 68 [00000027]                   	PUSH	LC3
   150 00000192 53                              	PUSH	EBX
   151 00000193 E8 [00000000]                   	CALL	_sprintf
   152 00000198 53                              	PUSH	EBX
   153 00000199 6A 07                           	PUSH	7
   154 0000019B 68 00000190                     	PUSH	400
   155 000001A0 6A 64                           	PUSH	100
   156 000001A2 0F BF 46 04                     	MOVSX	EAX,WORD [4+ESI]
   157 000001A6 50                              	PUSH	EAX
   158 000001A7 FF 76 08                        	PUSH	DWORD [8+ESI]
   159 000001AA E8 [00000000]                   	CALL	_putfonts8_asc
   160 000001AF 8D 65 F8                        	LEA	ESP,DWORD [-8+EBP]
   161 000001B2 5B                              	POP	EBX
   162 000001B3 5E                              	POP	ESI
   163 000001B4 5D                              	POP	EBP
   164 000001B5 C3                              	RET
   165                                          [SECTION .data]
   166 00000039 00 00 00                        	ALIGNB	4
   167 0000003C                                 _corb_num_entries:
   168 0000003C 00 00 00 00                     	RESB	4
   169                                          [SECTION .data]
   170 00000040                                 	ALIGNB	4
   171 00000040                                 _rirb_num_entries:
   172 00000040 00 00 00 00                     	RESB	4
   173                                          [SECTION .data]
   174 00000044                                 	ALIGNB	4
   175 00000044                                 _corb_buffer:
   176 00000044 00 00 00 00                     	RESB	4
   177                                          [SECTION .data]
   178 00000048                                 	ALIGNB	4
   179 00000048                                 _rirb_buffer:
   180 00000048 00 00 00 00                     	RESB	4
