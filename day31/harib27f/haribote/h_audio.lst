     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_corb_wp
     7 00000000                                 	EXTERN	_mmio
     8 00000000                                 	EXTERN	_memman_alloc_4k
     9 00000000                                 	EXTERN	_sprintf
    10 00000000                                 	EXTERN	_putfonts8_asc
    11 00000000                                 [FILE "h_audio.c"]
    12                                          [SECTION .data]
    13 00000000                                 	ALIGNB	4
    14 00000000                                 _mmio:
    15 00000000 FEBF0000                        	DD	-21037056
    16 00000004                                 	ALIGNB	4
    17 00000004                                 _corb_wp:
    18 00000004 00000001                        	DD	1
    19 00000008                                 	ALIGNB	4
    20 00000008                                 _speaker_node:
    21 00000008 FFFFFFFF                        	DD	-1
    22 0000000C                                 	ALIGNB	4
    23 0000000C                                 _pin_node:
    24 0000000C FFFFFFFF                        	DD	-1
    25                                          [SECTION .text]
    26 00000000                                 _corb_enquenu:
    27 00000000 A1 [00000004]                   	MOV	EAX,DWORD [_corb_wp]
    28 00000005 31 D2                           	XOR	EDX,EDX
    29 00000007 F7 35 [00000048]                	DIV	DWORD [_corb_num_entries]
    30 0000000D 55                              	PUSH	EBP
    31 0000000E A1 [00000050]                   	MOV	EAX,DWORD [_corb_buffer]
    32 00000013 89 E5                           	MOV	EBP,ESP
    33 00000015 57                              	PUSH	EDI
    34 00000016 56                              	PUSH	ESI
    35 00000017 8B 7D 08                        	MOV	EDI,DWORD [8+EBP]
    36 0000001A 8B 4D 0C                        	MOV	ECX,DWORD [12+EBP]
    37 0000001D C1 E7 1C                        	SAL	EDI,28
    38 00000020 53                              	PUSH	EBX
    39 00000021 C1 E1 14                        	SAL	ECX,20
    40 00000024 8B 5D 10                        	MOV	EBX,DWORD [16+EBP]
    41 00000027 C1 E3 08                        	SAL	EBX,8
    42 0000002A 09 CF                           	OR	EDI,ECX
    43 0000002C 09 DF                           	OR	EDI,EBX
    44 0000002E 0B 7D 14                        	OR	EDI,DWORD [20+EBP]
    45 00000031 89 3C 90                        	MOV	DWORD [EAX+EDX*4],EDI
    46 00000034 A1 [00000000]                   	MOV	EAX,DWORD [_mmio]
    47 00000039 FF 05 [00000004]                	INC	DWORD [_corb_wp]
    48 0000003F 66 89 50 48                     	MOV	WORD [72+EAX],DX
    49 00000043 89 D0                           	MOV	EAX,EDX
    50 00000045 5B                              	POP	EBX
    51 00000046 5E                              	POP	ESI
    52 00000047 5F                              	POP	EDI
    53 00000048 5D                              	POP	EBP
    54 00000049 C3                              	RET
    55 0000004A                                 	GLOBAL	_init_corb
    56 0000004A                                 _init_corb:
    57 0000004A 8B 15 [00000000]                	MOV	EDX,DWORD [_mmio]
    58 00000050 55                              	PUSH	EBP
    59 00000051 89 E5                           	MOV	EBP,ESP
    60 00000053 8A 42 4C                        	MOV	AL,BYTE [76+EDX]
    61 00000056 83 C8 FD                        	OR	EAX,-3
    62 00000059 88 42 4C                        	MOV	BYTE [76+EDX],AL
    63 0000005C 68 00001000                     	PUSH	4096
    64 00000061 FF 75 08                        	PUSH	DWORD [8+EBP]
    65 00000064 C7 05 [00000048] 00000100       	MOV	DWORD [_corb_num_entries],256
    66 0000006E E8 [00000000]                   	CALL	_memman_alloc_4k
    67 00000073 8B 15 [00000000]                	MOV	EDX,DWORD [_mmio]
    68 00000079 A3 [00000050]                   	MOV	DWORD [_corb_buffer],EAX
    69 0000007E 89 42 40                        	MOV	DWORD [64+EDX],EAX
    70 00000081 C1 E8 1F                        	SHR	EAX,31
    71 00000084 89 42 44                        	MOV	DWORD [68+EDX],EAX
    72 00000087 66 C7 42 48 0000                	MOV	WORD [72+EDX],0
    73 0000008D 66 8B 42 4A                     	MOV	AX,WORD [74+EDX]
    74 00000091 66 0D 8000                      	OR	AX,-32768
    75 00000095 66 89 42 4A                     	MOV	WORD [74+EDX],AX
    76 00000099 66 C7 42 4A 0000                	MOV	WORD [74+EDX],0
    77 0000009F 8A 42 4C                        	MOV	AL,BYTE [76+EDX]
    78 000000A2 83 C8 02                        	OR	EAX,2
    79 000000A5 88 42 4C                        	MOV	BYTE [76+EDX],AL
    80 000000A8 C9                              	LEAVE
    81 000000A9 C3                              	RET
    82 000000AA                                 	GLOBAL	_init_rirb
    83 000000AA                                 _init_rirb:
    84 000000AA 8B 15 [00000000]                	MOV	EDX,DWORD [_mmio]
    85 000000B0 55                              	PUSH	EBP
    86 000000B1 89 E5                           	MOV	EBP,ESP
    87 000000B3 8A 42 5C                        	MOV	AL,BYTE [92+EDX]
    88 000000B6 83 C8 FD                        	OR	EAX,-3
    89 000000B9 88 42 5C                        	MOV	BYTE [92+EDX],AL
    90 000000BC 68 00001000                     	PUSH	4096
    91 000000C1 FF 75 08                        	PUSH	DWORD [8+EBP]
    92 000000C4 C7 05 [0000004C] 00000100       	MOV	DWORD [_rirb_num_entries],256
    93 000000CE E8 [00000000]                   	CALL	_memman_alloc_4k
    94 000000D3 8B 15 [00000000]                	MOV	EDX,DWORD [_mmio]
    95 000000D9 A3 [00000054]                   	MOV	DWORD [_rirb_buffer],EAX
    96 000000DE 89 42 50                        	MOV	DWORD [80+EDX],EAX
    97 000000E1 C1 E8 1F                        	SHR	EAX,31
    98 000000E4 89 42 54                        	MOV	DWORD [84+EDX],EAX
    99 000000E7 66 8B 42 58                     	MOV	AX,WORD [88+EDX]
   100 000000EB 66 0D 8000                      	OR	AX,-32768
   101 000000EF 66 89 42 58                     	MOV	WORD [88+EDX],AX
   102 000000F3 66 C7 42 58 0000                	MOV	WORD [88+EDX],0
   103 000000F9 66 8B 42 5A                     	MOV	AX,WORD [90+EDX]
   104 000000FD 83 C8 01                        	OR	EAX,1
   105 00000100 66 89 42 5A                     	MOV	WORD [90+EDX],AX
   106 00000104 8A 42 5C                        	MOV	AL,BYTE [92+EDX]
   107 00000107 83 C8 02                        	OR	EAX,2
   108 0000010A 88 42 5C                        	MOV	BYTE [92+EDX],AL
   109 0000010D 8B 15 [00000000]                	MOV	EDX,DWORD [_mmio]
   110 00000113 8A 42 5C                        	MOV	AL,BYTE [92+EDX]
   111 00000116 83 C8 01                        	OR	EAX,1
   112 00000119 88 42 5C                        	MOV	BYTE [92+EDX],AL
   113 0000011C C9                              	LEAVE
   114 0000011D C3                              	RET
   115                                          [SECTION .data]
   116 00000010                                 LC0:
   117 00000010 67 63 61 70 3A 20 25 78 00      	DB	"gcap: %x",0x00
   118 00000019                                 LC1:
   119 00000019 43 4F 52 42 53 49 5A 45 3A 20   	DB	"CORBSIZE: %x",0x00
       00000023 25 78 00 
   120 00000026                                 LC2:
   121 00000026 52 49 52 42 53 49 5A 45 3A 20   	DB	"RIRBSIZE: %x",0x00
       00000030 25 78 00 
   122 00000033                                 LC3:
   123 00000033 6D 65 6D 6F 72 79 20 73 69 7A   	DB	"memory size: %dKB",0x00
       0000003D 65 3A 20 25 64 4B 42 00 
   124                                          [SECTION .text]
   125 0000011E                                 	GLOBAL	_hdaudio_test
   126 0000011E                                 _hdaudio_test:
   127 0000011E 55                              	PUSH	EBP
   128 0000011F 89 E5                           	MOV	EBP,ESP
   129 00000121 56                              	PUSH	ESI
   130 00000122 53                              	PUSH	EBX
   131 00000123 83 C4 80                        	ADD	ESP,-128
   132 00000126 8D 9D FFFFFF78                  	LEA	EBX,DWORD [-136+EBP]
   133 0000012C 8B 15 [00000000]                	MOV	EDX,DWORD [_mmio]
   134 00000132 8B 75 08                        	MOV	ESI,DWORD [8+EBP]
   135 00000135 66 8B 02                        	MOV	AX,WORD [EDX]
   136 00000138 66 C1 E8 08                     	SHR	AX,8
   137 0000013C 83 E0 0F                        	AND	EAX,15
   138 0000013F A3 [00000058]                   	MOV	DWORD [_iss],EAX
   139 00000144 66 8B 02                        	MOV	AX,WORD [EDX]
   140 00000147 66 C1 E8 0C                     	SHR	AX,12
   141 0000014B 0F B7 C0                        	MOVZX	EAX,AX
   142 0000014E A3 [0000005C]                   	MOV	DWORD [_oss],EAX
   143 00000153 66 8B 02                        	MOV	AX,WORD [EDX]
   144 00000156 0F B7 C0                        	MOVZX	EAX,AX
   145 00000159 50                              	PUSH	EAX
   146 0000015A 68 [00000010]                   	PUSH	LC0
   147 0000015F 53                              	PUSH	EBX
   148 00000160 E8 [00000000]                   	CALL	_sprintf
   149 00000165 53                              	PUSH	EBX
   150 00000166 6A 07                           	PUSH	7
   151 00000168 68 00000140                     	PUSH	320
   152 0000016D 6A 64                           	PUSH	100
   153 0000016F 0F BF 46 04                     	MOVSX	EAX,WORD [4+ESI]
   154 00000173 50                              	PUSH	EAX
   155 00000174 FF 76 08                        	PUSH	DWORD [8+ESI]
   156 00000177 E8 [00000000]                   	CALL	_putfonts8_asc
   157 0000017C A1 [00000000]                   	MOV	EAX,DWORD [_mmio]
   158 00000181 83 C4 24                        	ADD	ESP,36
   159 00000184 8A 40 4E                        	MOV	AL,BYTE [78+EAX]
   160 00000187 0F B6 C0                        	MOVZX	EAX,AL
   161 0000018A 50                              	PUSH	EAX
   162 0000018B 68 [00000019]                   	PUSH	LC1
   163 00000190 53                              	PUSH	EBX
   164 00000191 E8 [00000000]                   	CALL	_sprintf
   165 00000196 53                              	PUSH	EBX
   166 00000197 6A 07                           	PUSH	7
   167 00000199 68 00000154                     	PUSH	340
   168 0000019E 6A 64                           	PUSH	100
   169 000001A0 0F BF 46 04                     	MOVSX	EAX,WORD [4+ESI]
   170 000001A4 50                              	PUSH	EAX
   171 000001A5 FF 76 08                        	PUSH	DWORD [8+ESI]
   172 000001A8 E8 [00000000]                   	CALL	_putfonts8_asc
   173 000001AD A1 [00000000]                   	MOV	EAX,DWORD [_mmio]
   174 000001B2 83 C4 24                        	ADD	ESP,36
   175 000001B5 8A 40 5E                        	MOV	AL,BYTE [94+EAX]
   176 000001B8 0F B6 C0                        	MOVZX	EAX,AL
   177 000001BB 50                              	PUSH	EAX
   178 000001BC 68 [00000026]                   	PUSH	LC2
   179 000001C1 53                              	PUSH	EBX
   180 000001C2 E8 [00000000]                   	CALL	_sprintf
   181 000001C7 53                              	PUSH	EBX
   182 000001C8 6A 07                           	PUSH	7
   183 000001CA 68 00000168                     	PUSH	360
   184 000001CF 6A 64                           	PUSH	100
   185 000001D1 0F BF 46 04                     	MOVSX	EAX,WORD [4+ESI]
   186 000001D5 50                              	PUSH	EAX
   187 000001D6 FF 76 08                        	PUSH	DWORD [8+ESI]
   188 000001D9 E8 [00000000]                   	CALL	_putfonts8_asc
   189 000001DE 83 C4 24                        	ADD	ESP,36
   190 000001E1 68 00001000                     	PUSH	4096
   191 000001E6 FF 75 0C                        	PUSH	DWORD [12+EBP]
   192 000001E9 E8 [00000000]                   	CALL	_memman_alloc_4k
   193 000001EE 6A 04                           	PUSH	4
   194 000001F0 68 [00000033]                   	PUSH	LC3
   195 000001F5 53                              	PUSH	EBX
   196 000001F6 E8 [00000000]                   	CALL	_sprintf
   197 000001FB 53                              	PUSH	EBX
   198 000001FC 6A 07                           	PUSH	7
   199 000001FE 68 00000190                     	PUSH	400
   200 00000203 6A 64                           	PUSH	100
   201 00000205 0F BF 46 04                     	MOVSX	EAX,WORD [4+ESI]
   202 00000209 50                              	PUSH	EAX
   203 0000020A FF 76 08                        	PUSH	DWORD [8+ESI]
   204 0000020D E8 [00000000]                   	CALL	_putfonts8_asc
   205 00000212 8D 65 F8                        	LEA	ESP,DWORD [-8+EBP]
   206 00000215 5B                              	POP	EBX
   207 00000216 5E                              	POP	ESI
   208 00000217 5D                              	POP	EBP
   209 00000218 C3                              	RET
   210                                          [SECTION .data]
   211 00000045 00 00 00                        	ALIGNB	4
   212 00000048                                 _corb_num_entries:
   213 00000048 00 00 00 00                     	RESB	4
   214                                          [SECTION .data]
   215 0000004C                                 	ALIGNB	4
   216 0000004C                                 _rirb_num_entries:
   217 0000004C 00 00 00 00                     	RESB	4
   218                                          [SECTION .data]
   219 00000050                                 	ALIGNB	4
   220 00000050                                 _corb_buffer:
   221 00000050 00 00 00 00                     	RESB	4
   222                                          [SECTION .data]
   223 00000054                                 	ALIGNB	4
   224 00000054                                 _rirb_buffer:
   225 00000054 00 00 00 00                     	RESB	4
   226                                          [SECTION .data]
   227 00000058                                 	ALIGNB	4
   228 00000058                                 _iss:
   229 00000058 00 00 00 00                     	RESB	4
   230                                          [SECTION .data]
   231 0000005C                                 	ALIGNB	4
   232 0000005C                                 _oss:
   233 0000005C 00 00 00 00                     	RESB	4
