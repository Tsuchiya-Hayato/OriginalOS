     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_mmio
     7 00000000                                 	EXTERN	_memman_alloc_4k
     8 00000000                                 	EXTERN	_sprintf
     9 00000000                                 	EXTERN	_putfonts8_asc
    10 00000000                                 [FILE "h_audio.c"]
    11                                          [SECTION .data]
    12 00000000                                 	ALIGNB	4
    13 00000000                                 _mmio:
    14 00000000 FEBF0000                        	DD	-21037056
    15                                          [SECTION .text]
    16 00000000                                 	GLOBAL	_init_corb
    17 00000000                                 _init_corb:
    18 00000000 8B 15 [00000000]                	MOV	EDX,DWORD [_mmio]
    19 00000006 55                              	PUSH	EBP
    20 00000007 89 E5                           	MOV	EBP,ESP
    21 00000009 8A 42 4C                        	MOV	AL,BYTE [76+EDX]
    22 0000000C 83 C8 FD                        	OR	EAX,-3
    23 0000000F 88 42 4C                        	MOV	BYTE [76+EDX],AL
    24 00000012 68 00001000                     	PUSH	4096
    25 00000017 FF 75 08                        	PUSH	DWORD [8+EBP]
    26 0000001A E8 [00000000]                   	CALL	_memman_alloc_4k
    27 0000001F 8B 15 [00000000]                	MOV	EDX,DWORD [_mmio]
    28 00000025 89 42 40                        	MOV	DWORD [64+EDX],EAX
    29 00000028 C1 E8 1F                        	SHR	EAX,31
    30 0000002B 89 42 44                        	MOV	DWORD [68+EDX],EAX
    31 0000002E 66 C7 42 48 0000                	MOV	WORD [72+EDX],0
    32 00000034 66 8B 42 4A                     	MOV	AX,WORD [74+EDX]
    33 00000038 66 0D 8000                      	OR	AX,-32768
    34 0000003C 66 89 42 4A                     	MOV	WORD [74+EDX],AX
    35 00000040 66 C7 42 4A 0000                	MOV	WORD [74+EDX],0
    36 00000046 8A 42 4C                        	MOV	AL,BYTE [76+EDX]
    37 00000049 83 C8 02                        	OR	EAX,2
    38 0000004C 88 42 4C                        	MOV	BYTE [76+EDX],AL
    39 0000004F C9                              	LEAVE
    40 00000050 C3                              	RET
    41 00000051                                 	GLOBAL	_init_rirb
    42 00000051                                 _init_rirb:
    43 00000051 8B 15 [00000000]                	MOV	EDX,DWORD [_mmio]
    44 00000057 55                              	PUSH	EBP
    45 00000058 89 E5                           	MOV	EBP,ESP
    46 0000005A 8A 42 5C                        	MOV	AL,BYTE [92+EDX]
    47 0000005D 83 C8 FD                        	OR	EAX,-3
    48 00000060 88 42 5C                        	MOV	BYTE [92+EDX],AL
    49 00000063 68 00001000                     	PUSH	4096
    50 00000068 FF 75 08                        	PUSH	DWORD [8+EBP]
    51 0000006B E8 [00000000]                   	CALL	_memman_alloc_4k
    52 00000070 8B 15 [00000000]                	MOV	EDX,DWORD [_mmio]

    mmio->corblbase = corb_buffer;
    mmio->corbubase = (corb_buffer >> 32);
    53 00000076 89 42 50                        	MOV	DWORD [80+EDX],EAX
    54 00000079 C1 E8 1F                        	SHR	EAX,31
    55 0000007C 89 42 54                        	MOV	DWORD [84+EDX],EAX
    56 0000007F 66 8B 42 58                     	MOV	AX,WORD [88+EDX]
    57 00000083 66 0D 8000                      	OR	AX,-32768

    58 00000087 66 89 42 58                     	MOV	WORD [88+EDX],AX
    59 0000008B 66 C7 42 58 0000                	MOV	WORD [88+EDX],0
    60 00000091 66 8B 42 5A                     	MOV	AX,WORD [90+EDX]
    61 00000095 83 C8 01                        	OR	EAX,1
    62 00000098 66 89 42 5A                     	MOV	WORD [90+EDX],AX
    63 0000009C 8A 42 5C                        	MOV	AL,BYTE [92+EDX]
    64 0000009F 83 C8 02                        	OR	EAX,2
    65 000000A2 88 42 5C                        	MOV	BYTE [92+EDX],AL
    66 000000A5 8B 15 [00000000]                	MOV	EDX,DWORD [_mmio]
    67 000000AB 8A 42 5C                        	MOV	AL,BYTE [92+EDX]
    68 000000AE 83 C8 01                        	OR	EAX,1
    69 000000B1 88 42 5C                        	MOV	BYTE [92+EDX],AL
    70 000000B4 C9                              	LEAVE
    71 000000B5 C3                              	RET
    72                                          [SECTION .data]
    73 00000004                                 LC0:
    74 00000004 67 63 61 70 3A 20 25 78 00      	DB	"gcap: %x",0x00
    75 0000000D                                 LC1:
    76 0000000D 43 4F 52 42 53 49 5A 45 3A 20   	DB	"CORBSIZE: %x",0x00
       00000017 25 78 00 
    77 0000001A                                 LC2:
    78 0000001A 52 49 52 42 53 49 5A 45 3A 20   	DB	"RIRBSIZE: %x",0x00
       00000024 25 78 00 
    79 00000027                                 LC3:
    80 00000027 6D 65 6D 6F 72 79 20 73 69 7A   	DB	"memory size: %dKB",0x00
       00000031 65 3A 20 25 64 4B 42 00 
    81                                          [SECTION .text]
    82 000000B6                                 	GLOBAL	_hdaudio_test
    83 000000B6                                 _hdaudio_test:
    84 000000B6 55                              	PUSH	EBP
    85 000000B7 89 E5                           	MOV	EBP,ESP
    86 000000B9 56                              	PUSH	ESI
    87 000000BA 53                              	PUSH	EBX
    88 000000BB 83 C4 80                        	ADD	ESP,-128
    89 000000BE 8D 9D FFFFFF78                  	LEA	EBX,DWORD [-136+EBP]
    90 000000C4 A1 [00000000]                   	MOV	EAX,DWORD [_mmio]
    91 000000C9 8B 75 08                        	MOV	ESI,DWORD [8+EBP]
    92 000000CC 66 8B 10                        	MOV	DX,WORD [EAX]
    93 000000CF 66 8B 10                        	MOV	DX,WORD [EAX]
    94 000000D2 66 8B 00                        	MOV	AX,WORD [EAX]
    95 000000D5 0F B7 C0                        	MOVZX	EAX,AX
    96 000000D8 50                              	PUSH	EAX
    97 000000D9 68 [00000004]                   	PUSH	LC0
    98 000000DE 53                              	PUSH	EBX
    99 000000DF E8 [00000000]                   	CALL	_sprintf
   100 000000E4 53                              	PUSH	EBX
   101 000000E5 6A 07                           	PUSH	7
   102 000000E7 68 00000140                     	PUSH	320
   103 000000EC 6A 64                           	PUSH	100
   104 000000EE 0F BF 46 04                     	MOVSX	EAX,WORD [4+ESI]
   105 000000F2 50                              	PUSH	EAX
   106 000000F3 FF 76 08                        	PUSH	DWORD [8+ESI]
   107 000000F6 E8 [00000000]                   	CALL	_putfonts8_asc
   108 000000FB A1 [00000000]                   	MOV	EAX,DWORD [_mmio]
   109 00000100 83 C4 24                        	ADD	ESP,36
   110 00000103 8A 40 4E                        	MOV	AL,BYTE [78+EAX]
   111 00000106 0F B6 C0                        	MOVZX	EAX,AL
   112 00000109 50                              	PUSH	EAX
   113 0000010A 68 [0000000D]                   	PUSH	LC1
   114 0000010F 53                              	PUSH	EBX
   115 00000110 E8 [00000000]                   	CALL	_sprintf
   116 00000115 53                              	PUSH	EBX
   117 00000116 6A 07                           	PUSH	7
   118 00000118 68 00000154                     	PUSH	340
   119 0000011D 6A 64                           	PUSH	100
   120 0000011F 0F BF 46 04                     	MOVSX	EAX,WORD [4+ESI]
   121 00000123 50                              	PUSH	EAX
   122 00000124 FF 76 08                        	PUSH	DWORD [8+ESI]
   123 00000127 E8 [00000000]                   	CALL	_putfonts8_asc
   124 0000012C A1 [00000000]                   	MOV	EAX,DWORD [_mmio]
   125 00000131 83 C4 24                        	ADD	ESP,36
   126 00000134 8A 40 5E                        	MOV	AL,BYTE [94+EAX]
   127 00000137 0F B6 C0                        	MOVZX	EAX,AL
   128 0000013A 50                              	PUSH	EAX
   129 0000013B 68 [0000001A]                   	PUSH	LC2
   130 00000140 53                              	PUSH	EBX
   131 00000141 E8 [00000000]                   	CALL	_sprintf
   132 00000146 53                              	PUSH	EBX
   133 00000147 6A 07                           	PUSH	7
   134 00000149 68 00000168                     	PUSH	360
   135 0000014E 6A 64                           	PUSH	100
   136 00000150 0F BF 46 04                     	MOVSX	EAX,WORD [4+ESI]
   137 00000154 50                              	PUSH	EAX
   138 00000155 FF 76 08                        	PUSH	DWORD [8+ESI]
   139 00000158 E8 [00000000]                   	CALL	_putfonts8_asc
   140 0000015D 83 C4 24                        	ADD	ESP,36
   141 00000160 68 00001000                     	PUSH	4096
   142 00000165 FF 75 0C                        	PUSH	DWORD [12+EBP]
   143 00000168 E8 [00000000]                   	CALL	_memman_alloc_4k
   144 0000016D 6A 04                           	PUSH	4
   145 0000016F 68 [00000027]                   	PUSH	LC3
   146 00000174 53                              	PUSH	EBX
   147 00000175 E8 [00000000]                   	CALL	_sprintf
   148 0000017A 53                              	PUSH	EBX
   149 0000017B 6A 07                           	PUSH	7
   150 0000017D 68 00000190                     	PUSH	400
   151 00000182 6A 64                           	PUSH	100
   152 00000184 0F BF 46 04                     	MOVSX	EAX,WORD [4+ESI]
   153 00000188 50                              	PUSH	EAX
   154 00000189 FF 76 08                        	PUSH	DWORD [8+ESI]
   155 0000018C E8 [00000000]                   	CALL	_putfonts8_asc
   156 00000191 8D 65 F8                        	LEA	ESP,DWORD [-8+EBP]
   157 00000194 5B                              	POP	EBX
   158 00000195 5E                              	POP	ESI
   159 00000196 5D                              	POP	EBP
   160 00000197 C3                              	RET
